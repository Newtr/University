ALTER SESSION SET CONTAINER = CDB$ROOT;


-- Задание 1 --
SELECT TABLESPACE_NAME, CONTENTS FROM DBA_TABLESPACES;

-- Задание 2 --
SELECT FILE_NAME, TABLESPACE_NAME FROM DBA_DATA_FILES;
SELECT FILE_NAME, TABLESPACE_NAME FROM DBA_TEMP_FILES;

-- Задание 3 --
SELECT GROUP#, MEMBERS, BYTES, ARCHIVED, SEQUENCE#, STATUS, FIRST_CHANGE# FROM V$LOG;

-- Задание 4 --
SELECT GROUP#, MEMBER FROM V$LOGFILE;

-- Задание 5 --
ALTER SYSTEM SWITCH LOGFILE;

-- Задание 6 --
SELECT GROUP#, MEMBERS, THREAD#, SEQUENCE#, ARCHIVED, STATUS, FIRST_CHANGE# FROM V$LOG;

-- Задание 7 --
ALTER DATABASE ADD LOGFILE GROUP 4 'D:\OracleXE_APP\oradata\XE\redo0411.log'
    SIZE 20M BLOCKSIZE 512;
    
-- Задание 8 --
SELECT GROUP#, MEMBERS, THREAD#, SEQUENCE#, ARCHIVED, STATUS, FIRST_CHANGE# FROM V$LOG;

-- Задание 9 --
ALTER DATABASE ADD LOGFILE MEMBER 'D:\OracleXE_APP\oradata\XE\redo042.log' TO GROUP 4;
ALTER DATABASE ADD LOGFILE MEMBER 'D:\OracleXE_APP\oradata\XE\redo043.log' TO GROUP 4;

-- Задание 10 --
SELECT GROUP#, MEMBER FROM V$LOGFILE;

-- Задание 11 --
ALTER DATABASE DROP LOGFILE MEMBER 'D:\OracleXE_APP\oradata\XE\redo043.log';
ALTER DATABASE DROP LOGFILE MEMBER 'D:\OracleXE_APP\oradata\XE\redo042.log';
ALTER DATABASE DROP LOGFILE GROUP 4;

-- Задание 12 --
SELECT GROUP#, MEMBERS, STATUS FROM V$LOG;
SELECT GROUP#, MEMBERS, THREAD#, SEQUENCE#, ARCHIVED, STATUS, FIRST_CHANGE# FROM V$LOG;

--docker exec -t -i oracledb /bin/bash

-- Задание 13 --
SELECT NAME, LOG_MODE FROM V$DATABASE;
SELECT INSTANCE_NAME, ARCHIVER, STATUS FROM V$INSTANCE;
SELECT * FROM V$ARCHIVED_LOG;

--docker exec -it oracledb sqlplus / as sysdba  

-- Задание 14 --
ALTER SYSTEM SWITCH LOGFILE;

ALTER SYSTEM ARCHIVE LOG CURRENT;

SELECT NAME, LOG_MODE FROM V$DATABASE;
SELECT INSTANCE_NAME, ARCHIVER, STATUS FROM V$INSTANCE;
SELECT MAX(FIRST_CHANGE#) FROM V$ARCHIVED_LOG;

--docker exec -t -i oracledb /bin/bash

SELECT * FROM V$CONTROLFILE;

SHOW PARAMETER CONTROL;

SELECT GROUP# FROM V$LOG WHERE STATUS='CURRENT';


--http://www.rebellionrider.com/how-to-read-control-file-in-oracle-database/