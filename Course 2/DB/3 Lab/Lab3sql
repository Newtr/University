ALTER SESSION SET CONTAINER=CDB$ROOT;

SELECT PDB_NAME, PDB_ID, STATUS FROM DBA_PDBS;

CREATE PLUGGABLE DATABASE TRA_pdb ADMIN USER TRA_user IDENTIFIED BY PASS
FILE_NAME_CONVERT = ('D:\ORACLEXE_APP\ORADATA\XE\PDBSEED\', 'D:\Документы БГТУ\2.БД\3 Lab\');
  
ALTER SESSION SET CONTAINER=TRA_PDB;  

SELECT FILE_NAME FROM CDB_DATA_FILES;
SELECT FILE_NAME FROM CDB_TEMP_FILES;
SELECT TABLESPACE_NAME FROM CDB_TABLESPACES;
SELECT ROLE FROM CDB_ROLES;
SELECT PRIVILEGE, GRANTEE FROM CDB_SYS_PRIVS;
SELECT PROFILE FROM CDB_PROFILES;
SELECT USERNAME FROM CDB_USERS;
SELECT GRANTEE, GRANTED_ROLE FROM CDB_ROLE_PRIVS;

ALTER SESSION SET CONTAINER=CDB$ROOT;

CREATE USER C##TRA
   IDENTIFIED BY pass;
   
ALTER SESSION SET CONTAINER=TRA_PDB;

CREATE USER C##TRA
   IDENTIFIED BY pass;

GRANT CREATE SESSION TO C##TRA CONTAINER = CURRENT;
GRANT CREATE TABLE TO C##TRA;
ALTER USER C##TRA QUOTA 2M ON SYSTEM;

ALTER SESSION SET CONTAINER=CDB$ROOT;

SELECT USERNAME FROM V$SESSION WHERE USERNAME IS NOT NULL;

--DROP TABLESPACE TS_TRA INCLUDING CONTENTS AND DATAFILES;
--DROP TABLESPACE TS_TRA_TEMP INCLUDING CONTENTS AND DATAFILES;
--DROP PLUGGABLE DATABASE TRA_PDB
--  INCLUDING DATAFILES;
--DROP USER C##TRA;