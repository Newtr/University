ALTER SESSION SET "_oracle_script" = TRUE;
ALTER SESSION SET CONTAINER=TRA_PDB;
ALTER PLUGGABLE DATABASE TRA_PDB OPEN;

SELECT NAME, OPEN_MODE FROM V$PDBS;



CREATE TABLESPACE TS_TRA
    DATAFILE 'TS_TRA.dbf'
    SIZE 7M
    AUTOEXTEND ON NEXT 5M
    MAXSIZE 30M;
    
CREATE TEMPORARY TABLESPACE TS_TRA_TEMP
    TEMPFILE 'TS_TRA_TEMP.dbf'
    SIZE 5M
    AUTOEXTEND ON NEXT 3M
    MAXSIZE 20M;

CREATE ROLE RL_TRA;

GRANT CREATE SESSION,
      CREATE TABLE,
      CREATE VIEW,
      CREATE PROCEDURE
      TO RL_TRA;
    
CREATE PROFILE PF_TRA LIMIT
    PASSWORD_LIFE_TIME 180
    SESSIONS_PER_USER 3
    FAILED_LOGIN_ATTEMPTS 7
    PASSWORD_LOCK_TIME 1
    PASSWORD_REUSE_TIME 10
    PASSWORD_GRACE_TIME DEFAULT
    CONNECT_TIME 180
    IDLE_TIME 30;
    
CREATE USER U1_TRA_PDB 
    IDENTIFIED BY pass
    DEFAULT TABLESPACE TS_TRA
    TEMPORARY TABLESPACE TS_TRA_TEMP
    PROFILE PF_TRA
    ACCOUNT UNLOCK;
    
GRANT RL_TRA TO U1_TRA_PDB;

ALTER USER U1_TRA_PDB QUOTA 2M ON TS_TRA;